{"version":3,"sources":["components/getPosts.tsx","components/DownloadButton.tsx","components/PostsList.tsx","App.tsx","helper/customDebounce.js","index.tsx"],"names":["getData","url","a","fetch","getInfo","infoToJson","json","preparedDatas","Promise","all","posts","users","comments","preparedPosts","map","post","user","find","ownerPost","id","userId","postsComments","filter","comment","postId","DownloadButton","dataGeneration","isLoading","type","onClick","disabled","className","PostsList","key","title","body","name","email","App","visiblePosts","value","useState","loading","setLoading","isLoaded","setIsLoaded","setPosts","downloadError","setError","searchValue","setSearchValue","debouncedSearch","f","delay","timerId","clearTimeout","args","setTimeout","debounce","searchQuery","replace","includes","then","data","catch","finally","placeholder","onChange","e","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8bb5d30f.chunk.js","sourcesContent":["import { Post, User, Comments } from './interfaces';\n\nconst getData = async (url: string) => {\n  const getInfo = await fetch(`./api/${url}.json`);\n  const infoToJson = getInfo.json();\n\n  return infoToJson;\n};\n\nexport const preparedDatas = async () => {\n  const [posts, users, comments] = await Promise.all([\n    getData('posts'),\n    getData('users'),\n    getData('comments'),\n  ]);\n\n  const preparedPosts = posts.map((post: Post) => {\n    const user = users.find((ownerPost: User) => ownerPost.id === post.userId);\n    const postsComments = comments.filter((comment: Comments) => comment.postId === post.id);\n\n    return {\n      ...post,\n      user,\n      comments: postsComments,\n    };\n  });\n\n  return preparedPosts;\n};\n","import React from 'react';\n\ninterface Props {\n  dataGeneration: () => void;\n  isLoading: boolean;\n}\n\nexport const DownloadButton: React.FC<Props> = ({ dataGeneration, isLoading }) => {\n  return (\n    <>\n      <button\n        type=\"button\"\n        onClick={dataGeneration}\n        disabled={isLoading}\n        className=\"loading-button\"\n      >\n        Get posts\n      </button>\n      {isLoading && (\n        <p className=\"loading-text\">Loading... Please wait!</p>\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport { Post } from './interfaces';\n\ninterface Props {\n  posts: Post[];\n}\n\nexport const PostsList: React.FC<Props> = ({ posts }) => (\n  <>\n    {posts.map(post => (\n      <div className=\"post\" key={post.id}>\n        <p className=\"post__title\">\n          <span className=\"post__id\">\n            {post.id}\n              .\n            </span>\n          {post.title}\n        </p>\n        <p className=\"post__body\">\n          {post.body}\n        </p>\n        {post.comments.map(comment => (\n          <div className=\"post__comm\" key={comment.id}>\n            <div className=\"comm\">\n              <p className=\"comm__name\">\n                {comment.name}\n              </p>\n              <p className=\"comm__email\">\n                {comment.email}\n              </p>\n              <p className=\"comm__body\">\n                {comment.body}\n              </p>\n            </div>\n          </div>\n        ))}\n      </div>\n    ))}\n  </>\n);\n\n","import React, { FC, useState } from 'react';\nimport './App.scss';\nimport { Post } from './components/interfaces';\nimport { preparedDatas } from './components/getPosts';\nimport { DownloadButton } from './components/DownloadButton';\nimport { PostsList } from './components/PostsList';\nimport { debounce } from './helper/customDebounce';\n\nconst App: FC = () => {\n  const [loading, setLoading] = useState(false);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [downloadError, setError] = useState(false);\n  const [searchValue, setSearchValue] = useState('');\n  let visiblePosts: Post[];\n\n  const loadData = () => {\n    setLoading(true);\n    preparedDatas()\n      .then(data => {\n        setPosts(data);\n        setIsLoaded(true);\n        setError(false);\n      })\n      .catch(() => setError(true))\n      .finally(() => setLoading(false));\n  };\n\n  const startSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { value } = e.target;\n\n    debouncedSearch(value);\n  };\n\n  const filterPosts = (value: string) => {\n    if (!value) {\n      return posts;\n    }\n\n    return posts\n      .filter((post: Post) => (post.title + post.body)\n        .replace(/\\s*/g, ' ')\n        .includes(value\n          .replace(/\\s*/g, ' ')));\n  };\n\n  const debouncedSearch = debounce((searchQuery: string) => setSearchValue(searchQuery), 1000);\n\n  visiblePosts = filterPosts(searchValue);\n\n  return (\n    <>\n      <h1 className=\"title\">Posts</h1>\n      {!isLoaded\n        && <DownloadButton isLoading={loading} dataGeneration={loadData} />}\n      {downloadError && (\n        <p className=\"error\">Loading error, please, try again.</p>\n      )}\n      {isLoaded && (\n        <>\n          <div className=\"inputContainer\">\n            <input\n              type=\"text\"\n              className=\"input\"\n              placeholder=\"write a text for search\"\n              onChange={startSearch}\n            />\n          </div>\n          <PostsList posts={visiblePosts} />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default App;\n","export const debounce = (f, delay) => {\n  let timerId;\n\n  const debounced = (...args) => {\n    clearTimeout(timerId);\n    timerId = setTimeout(f, delay, ...args);\n  };\n\n  return debounced;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bulma/css/bulma.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}